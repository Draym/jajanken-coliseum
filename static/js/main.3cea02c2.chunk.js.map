{"version":3,"sources":["game/data/JaJankenTechnique.tsx","resources/techniques/guu.png","resources/techniques/chi.png","resources/techniques/paa.png","resources/techniques/hidden.png","resources/background/title.png","resources/background/jajanken.png","resources/images.js","web/views/coliseum/ColiseumMatch.tsx","web/views/HomeView.tsx","blockchain/Web3Utils.tsx","web/views/Navbar.tsx","blockchain/ContractLoader.tsx","utils/NumberUtils.tsx","blockchain/Lina.tsx","game/JaJanken.tsx","web/views/coliseum/JaJankenColiseum.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["JaJankenTechnique","MatchState","MatchEnding","BackgroundImd","title","jajanken","TechniqueImg","guu","chi","paa","hidden","fromTechnique","technique","Chi","Guu","Paa","HomeView","props","componentDidMount","a","setState","loading","startColiseum","history","push","state","this","id","className","src","alt","onClick","Component","withRouter","Web3Utils","window","ethereum","request","method","web3","Web3","currentProvider","alert","eth","net","getId","getAccounts","defaultAccount","account","value","utils","fromAscii","Navbar","href","target","rel","icon","ContractLoader","getNetwork","networkId","console","log","JaJankenColiseumData","JaJankenColiseum","networks","Contract","abi","address","NumberUtils","parseInt","toString","Lina","data","call","from","send","getDefaultAccount","JaJanken","contract","methods","entranceTicketFee","getGameEntranceTicketFee","then","entranceTicket","joinGame","joinMatch","_","alivePlayers","totalPaa","totalChi","totalGuu","getProfile","profile","queued","inQueue","inMatch","nullAddress","nen","playerAddress","getPlayer","player","techniques","matchId","matches","match","p2","p1Hidden","p2Hidden","p1Revealed","p2Revealed","playTime","revealTime","Player","key","localStorage","getItem","initKey","uuidv4","substring","setItem","None","encodeAction","encode","getKey","encodedTechnique","playMatch","revealMatch","GameState","ColiseumMatch","handleMatchEnd","event","savePlay","returnValues","matchState","Result","matchResult","result","winner","DRAW","WINNER","LOOSER","opponent","p1","opponentPlayed","p2Played","p1Played","handleMatchPlayed","Reveal","backToLobby","currentPick","backToPickPlay","PickPlay","pickGuu","Commit","pickChi","pickPaa","commitPlay","jajankenColiseum","CommitWait","revealPlay","RevealWait","nenBalance","availableGuu","availablePaa","availableChi","getPlayed","currentMatch","Loading","loadColiseumData","subscribeToGameEvents","coliseum","getMyProfile","getMatch","meHidden","opHidden","meRevealed","opRevealed","MatchEnded","nullBytes","getOpponent","events","MatchEnd","on","MatchPlayed","disabled","width","opponentPick","handleStartMatch","gameState","InMatch","handlePlayerJoinGame","p","Lobby","getGameStats","game","joinColiseum","joinMatchQueue","LookingMatch","catch","error","nextProps","instantiateColiseum","setDefaultAccount","NeedPay","opponentId","NotValid","PlayerJoin","MatchStart","content","library","add","faGithub","faLinkedinIn","App","loadMetamask","loadBlockchainData","listenNetworkChanges","accounts","getEth","chainId","role","style","maxWidth","basename","process","path","network","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3cea02c2.chunk.js","sourcesContent":["export enum JaJankenTechnique {\n    None,\n    Guu,\n    Paa,\n    Chi\n}","export default __webpack_public_path__ + \"static/media/guu.b4d646ff.png\";","export default __webpack_public_path__ + \"static/media/chi.9d6708ec.png\";","export default __webpack_public_path__ + \"static/media/paa.063b3a7d.png\";","export default __webpack_public_path__ + \"static/media/hidden.ee575a9e.png\";","export default __webpack_public_path__ + \"static/media/title.f0b634e4.png\";","export default __webpack_public_path__ + \"static/media/jajanken.4f71cf9e.png\";","import guu from \"./techniques/guu.png\"\nimport chi from \"./techniques/chi.png\"\nimport paa from \"./techniques/paa.png\"\nimport hidden from \"./techniques/hidden.png\"\nimport title from \"./background/title.png\"\nimport jajanken from \"./background/jajanken.png\"\nimport {JaJankenTechnique} from \"../game/data/JaJankenTechnique\";\n\nexport const BackgroundImd = {\n    title: title,\n    jajanken: jajanken\n}\n\nexport const TechniqueImg = {\n    guu: guu,\n    chi: chi,\n    paa: paa,\n    hidden: hidden,\n    fromTechnique: (technique) => {\n        if (technique === JaJankenTechnique.Chi) {\n            return chi\n        } else if (technique === JaJankenTechnique.Guu) {\n            return guu\n        } else if (technique === JaJankenTechnique.Paa) {\n            return paa\n        } else {\n            return hidden\n        }\n    }\n}","import React, {Component} from \"react\"\nimport {RouteComponentProps, withRouter} from \"react-router-dom\"\nimport JaJanken from \"../../../game/JaJanken\"\nimport {TechniqueImg} from \"../../../resources/images\"\nimport {CurrentMatch} from \"../../../game/data/CurrentMatch\"\nimport {JaJankenTechnique} from \"../../../game/data/JaJankenTechnique\"\nimport Lina from \"../../../blockchain/Lina\"\nimport Web3Utils from \"../../../blockchain/Web3Utils\"\n\nenum MatchState {\n    Loading,\n    PickPlay,\n    Commit,\n    CommitWait,\n    Reveal,\n    RevealWait,\n    Result,\n    MatchEnded\n}\n\nenum MatchEnding {\n    WINNER,\n    LOOSER,\n    DRAW\n}\n\n\ninterface ColiseumMatchProperties extends RouteComponentProps {\n    jajankenColiseum: any,\n    currentMatch: CurrentMatch,\n    backToLobby: () => void\n}\n\ninterface ColiseumMatchState {\n    nenBalance: number,\n    availableGuu: number,\n    availablePaa: number,\n    availableChi: number,\n    currentPick: JaJankenTechnique,\n    match: CurrentMatch,\n    matchState: MatchState,\n    matchResult: MatchResult | null,\n    opponent: Opponent | null\n}\n\ninterface Opponent {\n    address: string,\n    nen: number,\n    techniques: number\n}\n\ninterface MatchResult {\n    opponent: string,\n    opponentPlayed: JaJankenTechnique,\n    winner: string,\n    result: MatchEnding\n}\n\nclass ColiseumMatch extends Component<ColiseumMatchProperties, ColiseumMatchState> {\n\n    constructor(props: ColiseumMatchProperties) {\n        super(props)\n\n        this.state = {\n            nenBalance: 0,\n            availableGuu: 0,\n            availablePaa: 0,\n            availableChi: 0,\n            currentPick: JaJanken.Player.getPlayed(),\n            match: props.currentMatch,\n            matchState: MatchState.Loading,\n            matchResult: null,\n            opponent: null\n        }\n    }\n\n    async componentDidMount() {\n        await this.loadColiseumData()\n        await this.subscribeToGameEvents()\n    }\n\n    async loadColiseumData() {\n        let coliseum = await this.props.jajankenColiseum\n        JaJanken.getMyProfile(coliseum).then(profile => {\n                if (profile) {\n                    if (profile.nen === 0) {\n                        this.setState({matchState: MatchState.Result})\n                        window.alert(`Account ${Lina.account()} has previously lost all his nen, please re-join the game first!`)\n                    } else if (profile.chi === 0 && profile.paa === 0 && profile.guu === 0) {\n                        this.setState({matchState: MatchState.Result})\n                        window.alert(`Account ${Lina.account()} has no card to play, you can withdraw you gain or re-join the game!`)\n                    } else {\n                        this.setState({\n                            nenBalance: profile.nen,\n                            availableGuu: profile.guu,\n                            availablePaa: profile.paa,\n                            availableChi: profile.chi,\n                            matchState: MatchState.PickPlay\n                        })\n                    }\n                } else {\n                    this.setState({matchState: MatchState.Result})\n                    window.alert(`Account ${Lina.account()} do not exist yet, please join the game first!`)\n                }\n\n                JaJanken.getMatch(coliseum, this.state.match.matchId).then(match => {\n                    console.log(\"{match}[init] match: \", match)\n                    if (match != null) {\n                        let meHidden\n                        let opHidden\n                        let meRevealed\n                        let opRevealed\n\n\n                        if (match.p2 === Web3Utils.nullAddress()) {\n                            this.setState({matchState: MatchState.MatchEnded})\n                        } else {\n                            if (Lina.account() === this.state.match.matchId) {\n                                meHidden = match.p1Hidden\n                                opHidden = match.p2Hidden\n                                meRevealed = match.p1Revealed\n                                opRevealed = match.p2Revealed\n                            } else {\n                                meHidden = match.p2Hidden\n                                opHidden = match.p1Hidden\n                                meRevealed = match.p2Revealed\n                                opRevealed = match.p1Revealed\n                            }\n\n                            if (meRevealed !== JaJankenTechnique.None) {\n                                if (opRevealed !== JaJankenTechnique.None) {\n                                    this.setState({matchState: MatchState.Result})\n                                } else {\n                                    this.setState({matchState: MatchState.RevealWait})\n                                }\n                            } else {\n                                if (opRevealed !== JaJankenTechnique.None) {\n                                    this.setState({matchState: MatchState.Reveal})\n                                } else {\n                                    if (meHidden !== Web3Utils.nullBytes()) {\n                                        if (opHidden !== Web3Utils.nullBytes()) {\n                                            this.setState({matchState: MatchState.Reveal})\n                                        } else {\n                                            this.setState({matchState: MatchState.CommitWait})\n                                        }\n                                    } else {\n                                        this.setState({\n                                            currentPick: JaJanken.Player.getPlayed(),\n                                            matchState: JaJanken.Player.getPlayed() !== JaJankenTechnique.None ? MatchState.Commit : MatchState.PickPlay\n                                        })\n                                    }\n                                }\n                            }\n                        }\n                    }\n                })\n            }\n        )\n        JaJanken.getOpponent(coliseum, this.state.match.p1 === Lina.account() ? this.state.match.p2 : this.state.match.p1).then(opponent => {\n            console.log(\"[test] opponent: \", opponent)\n            if (opponent != null) {\n                this.setState({\n                    opponent: {\n                        address: this.state.match.p1 === Lina.account() ? this.state.match.p2 : this.state.match.p1,\n                        nen: opponent.nen,\n                        techniques: opponent.techniques\n                    }\n                })\n            }\n        })\n    }\n\n    async subscribeToGameEvents() {\n        await this.props.jajankenColiseum\n\n        this.props.jajankenColiseum.events.MatchEnd({p1: Lina.account()})\n            .on('data', this.handleMatchEnd)\n        this.props.jajankenColiseum.events.MatchEnd({p2: Lina.account()})\n            .on('data', this.handleMatchEnd)\n        this.props.jajankenColiseum.events.MatchPlayed({matchId: this.state.match.matchId})\n            .on('data', this.handleMatchPlayed)\n    }\n\n    handleMatchEnd = (event: any) => {\n        JaJanken.Player.savePlay(JaJankenTechnique.None)\n        const data = event.returnValues\n        this.setState({\n            matchState: MatchState.Result,\n            matchResult: {\n                result: data.winner === Web3Utils.nullAddress() ? MatchEnding.DRAW : (data.winner === Lina.account() ? MatchEnding.WINNER : MatchEnding.LOOSER),\n                opponent: data.p1 === Lina.account() ? data.p2 : data.p1,\n                opponentPlayed: data.p1 === Lina.account() ? parseInt(data.p2Played) : parseInt(data.p1Played),\n                winner: data.winner\n            }\n        })\n    }\n\n    handleMatchPlayed = (_: any) => {\n        this.setState({\n            matchState: MatchState.Reveal\n        })\n    }\n\n    backToLobby = () => {\n        this.setState({currentPick: JaJankenTechnique.None})\n        this.props.backToLobby()\n    }\n\n    backToPickPlay = () => {\n        JaJanken.Player.savePlay(JaJankenTechnique.None)\n        this.setState({currentPick: JaJankenTechnique.None, matchState: MatchState.PickPlay})\n    }\n\n    pickGuu = () => {\n        JaJanken.Player.savePlay(JaJankenTechnique.Guu)\n        this.setState({currentPick: JaJankenTechnique.Guu, matchState: MatchState.Commit})\n    }\n    pickChi = () => {\n        JaJanken.Player.savePlay(JaJankenTechnique.Chi)\n        this.setState({currentPick: JaJankenTechnique.Chi, matchState: MatchState.Commit})\n    }\n    pickPaa = () => {\n        JaJanken.Player.savePlay(JaJankenTechnique.Paa)\n        this.setState({currentPick: JaJankenTechnique.Paa, matchState: MatchState.Commit})\n    }\n\n    commitPlay = async () => {\n        JaJanken.Player.commitPlay(this.props.jajankenColiseum, this.state.match.matchId, this.state.currentPick).then(_ => {\n            this.setState({matchState: MatchState.CommitWait})\n        })\n    }\n\n    revealPlay = async () => {\n        await JaJanken.Player.revealPlay(this.props.jajankenColiseum, this.state.match.matchId, this.state.currentPick).then(_ => {\n            this.setState({matchState: MatchState.RevealWait})\n        })\n    }\n\n    render() {\n        let currentPick = TechniqueImg.fromTechnique(this.state.currentPick)\n\n        let matchState = () => {\n            if (this.state.matchState === MatchState.Loading) {\n                return <p id=\"loader\" className=\"text-center\">Loading...</p>\n            } else if (this.state.matchState === MatchState.PickPlay) {\n                return <div>\n                    <button onClick={this.pickGuu} disabled={this.state.availableGuu === 0}><img\n                        className={this.state.availableGuu === 0 ? \"img-disabled card\" : \"card\"} src={TechniqueImg.guu}\n                        width={200} alt=\"guu\"/></button>\n                    <button onClick={this.pickChi} disabled={this.state.availableChi === 0}><img\n                        className={this.state.availableChi === 0 ? \"img-disabled card\" : \"card\"} src={TechniqueImg.chi}\n                        width={200} alt=\"chi\"/></button>\n                    <button onClick={this.pickPaa} disabled={this.state.availablePaa === 0}><img\n                        className={this.state.availablePaa === 0 ? \"img-disabled card\" : \"card\"} src={TechniqueImg.paa}\n                        width={200} alt=\"paa\"/></button>\n                </div>\n            } else if (this.state.matchState === MatchState.Commit) {\n                return <div>\n                    <img className=\"card\" src={currentPick} width={300} alt=\"currentPicket\"/>\n                    <button className={\"btn-light\"} onClick={this.commitPlay}>Commit play!</button>\n                    <div>\n                        <button className={\"btn-light\"} onClick={this.backToPickPlay}>Back to PickPlay</button>\n                    </div>\n                </div>\n            } else if (this.state.matchState === MatchState.Reveal) {\n                return <div>\n                    <img className=\"card\" src={currentPick} width={300} alt=\"currentPicket\"/>\n                    <button className={\"btn-light\"} onClick={this.revealPlay}>Fight!</button>\n                </div>\n            } else if (this.state.matchState === MatchState.Result) {\n                let opponentPick = TechniqueImg.fromTechnique(this.state.matchResult!.opponentPlayed)\n                return <div className=\"row\">\n                    <div>\n                        <img className=\"card\" src={currentPick} width={300} alt=\"currentPicket\"/>\n                        <span>...VS...</span>\n                        <img className=\"card\" src={opponentPick} width={300} alt=\"currentPicket\"/>\n                    </div>\n                    <div>\n                        <h2>You {this.state.matchResult!.result === MatchEnding.WINNER ? \"Win!\" : (this.state.matchResult!.result === MatchEnding.LOOSER ? \"Loose :/\" : \"Equality\")}</h2>\n                        <button className={\"btn-light\"} onClick={this.backToLobby}>Back to Lobby!</button>\n                    </div>\n                </div>\n            } else if (this.state.matchState === MatchState.CommitWait || this.state.matchState === MatchState.RevealWait) {\n                return <div>\n                    <img className=\"card\" src={currentPick} width={300} alt=\"currentPicket\"/>\n                    <span\n                        className={\"btn-light\"}>waiting for opponent {this.state.matchState === MatchState.CommitWait ? \"commit\" : \"reveal\"}</span>\n                </div>\n            } else if (this.state.matchState === MatchState.MatchEnded) {\n                return <div>\n                    <h4>Match is already finished</h4>\n                    <button className={\"btn-light\"} onClick={this.backToLobby}>Back to Lobby!</button>\n                </div>\n            } else {\n                return <div>How did you get there?</div>\n            }\n        }\n\n        return <div>\n            <h4>Profile ({this.state.nenBalance}Nen):\n                [{this.state.availableGuu} Guu][{this.state.availableChi} Chi][{this.state.availablePaa} Paa]</h4>\n            {matchState()}\n        </div>\n    }\n}\n\nexport default withRouter(ColiseumMatch)","import React, {Component} from \"react\"\nimport {RouteComponentProps, withRouter} from \"react-router-dom\"\nimport {BackgroundImd} from \"../../resources/images\"\n\ninterface HomeViewProperties extends RouteComponentProps {\n}\n\ninterface HomeViewState {\n    loading: Boolean\n}\n\nclass HomeView extends Component<HomeViewProperties, HomeViewState> {\n\n    constructor(props: HomeViewProperties) {\n        super(props)\n        this.state = {\n            loading: true\n        }\n    }\n\n    componentDidMount = async () => {\n        this.setState({loading: false})\n    }\n\n    startColiseum = async () => {\n        this.props.history.push('/coliseum')\n    }\n\n    render() {\n        if (this.state.loading) {\n            return <p id=\"loader\" className=\"text-center\">Loading...</p>\n        } else {\n            return <div>\n                <div className=\"row horizontal-align\">\n                    <img id=\"main-img\" src={BackgroundImd.jajanken} alt=\"\"></img>\n                </div>\n                <div className=\"row horizontal-align\">\n                    <img id=\"title-img\" src={BackgroundImd.title} alt=\"\"></img>\n                </div>\n                <div className=\"row horizontal-align\">\n                    <button className=\"btn-info fw-bold\" onClick={this.startColiseum}>Join Coliseum</button>\n                </div>\n            </div>\n        }\n    }\n}\n\nexport default withRouter(HomeView)","import Web3 from 'web3'\n\ndeclare let window: any;\n\nexport default class Web3Utils {\n\n    static async loadMetamask() {\n        if (window.ethereum) {\n            await window.ethereum.request({ method: 'eth_requestAccounts' })\n            window.web3 = new Web3(window.ethereum)\n            return true\n        }\n        else if (window.web3) {\n            window.web3 = new Web3(window.web3.currentProvider)\n            return true\n        }\n        else {\n            window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n            return false\n        }\n    }\n\n    // @ts-ignore\n    static getEth(): EthereumProvider | null {\n        return window.ethereum\n    }\n\n    static async getNetwork(): Promise<number> {\n        return window.web3.eth.net.getId()\n    }\n\n    static async getAccounts(): Promise<string[]> {\n        return window.web3.eth.getAccounts()//window.ethereum.request({ method: 'eth_requestAccounts' })\n    }\n\n    static getDefaultAccount(): string | null {\n        return window.web3.eth.defaultAccount\n    }\n\n    static setDefaultAccount(account: any) {\n        window.web3.eth.defaultAccount = account\n    }\n\n    static encode(value: string): string {\n       return window.web3.utils.fromAscii(value)\n    }\n\n    static nullAddress() {\n        return '0x0000000000000000000000000000000000000000';\n    }\n\n    static nullBytes() {\n        return '0x0000000000000000000000000000000000000000000000000000000000000000';\n    }\n}","import React, {Component} from 'react'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\n\ntype NavbarProperties = {\n    account: String,\n}\ntype NavbarState = {\n    account: String,\n    loading: Boolean\n}\n\nexport default class Navbar extends Component<NavbarProperties, NavbarState> {\n    constructor(props: NavbarProperties) {\n        super(props)\n        this.state = {\n            account: props.account,\n            loading: true\n        }\n    }\n\n    async componentDidMount() {\n        this.setState({loading: false})\n    }\n\n    render() {\n        return <nav className=\"navbar navbar-dark fixed-top flex-md-nowrap p-0\">\n            <div className=\"col-md-2\">\n                <a className=\"navbar-brand\"\n                   href=\"https://github.com/Draym/jajanken-evm\"\n                   target=\"_blank\"\n                   rel=\"noopener noreferrer\">\n                    <span><FontAwesomeIcon icon={['fab', \"github\"]}/> smart-contracts</span>\n                </a>\n            </div>\n            <div className=\"col-md-4\">\n                <small id=\"wallet-address\" className=\"text-white bg-dark\">{this.props.account}</small>\n            </div>\n        </nav>\n    }\n}","import JaJankenColiseum from './contracts/JaJankenColiseum.json'\nimport Web3Utils from \"./Web3Utils\";\n\ndeclare let window: any;\n\nexport default class ContractLoader {\n    static async instantiateColiseum() {\n        const networkId = await Web3Utils.getNetwork()\n        console.log(\"network\", networkId)\n        // @ts-ignore\n        const JaJankenColiseumData = JaJankenColiseum.networks[networkId]\n        console.log(\"JaJankenColiseumData\", JaJankenColiseumData)\n        if (JaJankenColiseumData) {\n            return new window.web3.eth.Contract(JaJankenColiseum.abi, JaJankenColiseumData.address)\n        } else {\n            window.alert('JaJankenColiseum contract not deployed to detected network.')\n            return null\n        }\n\n    }\n}","export default class NumberUtils {\n    static from(value: any): number {\n        return parseInt(value.toString())\n    }\n}","import Web3Utils from \"./Web3Utils\";\n\nexport default class Lina {\n\n    static async call(method: any, data: object = {}) {\n        return method.call({from: Lina.account(), ...data})\n    }\n\n    static async send(method: any, data: object = {}) {\n        return method.send({from: Lina.account(), ...data})\n    }\n\n    static account() {\n        return Web3Utils.getDefaultAccount()\n    }\n}","import NumberUtils from \"../utils/NumberUtils\";\nimport {PlayerStats} from \"./data/PlayerStats\";\nimport {GameStats} from \"./data/GameStats\";\nimport {OpponentStats} from \"./data/OpponentStats\";\nimport Lina from \"../blockchain/Lina\";\nimport Web3Utils from \"../blockchain/Web3Utils\";\nimport {JaJankenTechnique} from \"./data/JaJankenTechnique\";\nimport {v4 as uuidv4} from \"uuid\";\nimport {MatchStats} from \"./data/MatchStats\";\n\nexport default class JaJanken {\n\n    static async getGameEntranceTicketFee(contract: any): Promise<number> {\n        return await Lina.call(contract.methods.entranceTicketFee())\n    }\n\n    static async joinColiseum(contract: any) {\n        this.getGameEntranceTicketFee(contract).then(entranceTicket => {\n            Lina.send(contract.methods.joinGame(), {value: entranceTicket})\n        })\n    }\n\n    static async joinMatchQueue(contract: any) {\n        Lina.send(contract.methods.joinMatch()).then(_ => {\n        })\n    }\n\n    static async getGameStats(contract: any): Promise<GameStats> {\n        const alivePlayers = await Lina.call(contract.methods.alivePlayers())\n        const totalPaa = await Lina.call(contract.methods.totalPaa())\n        const totalChi = await Lina.call(contract.methods.totalChi())\n        const totalGuu = await Lina.call(contract.methods.totalGuu())\n        return {\n            alivePlayers: NumberUtils.from(alivePlayers),\n            totalPaa: NumberUtils.from(totalPaa),\n            totalChi: NumberUtils.from(totalChi),\n            totalGuu: NumberUtils.from(totalGuu)\n        }\n    }\n\n    static async getMyProfile(contract: any): Promise<PlayerStats | null> {\n        const profile = await Lina.call(contract.methods.getProfile())\n        const queued = await Lina.call(contract.methods.queued())\n        if (profile) {\n            return {\n                inQueue: queued === Web3Utils.getDefaultAccount(),\n                inMatch: profile.inMatch === Web3Utils.nullAddress() ? null : profile.inMatch,\n                nen: NumberUtils.from(profile.nen),\n                guu: NumberUtils.from(profile.guu),\n                paa: NumberUtils.from(profile.paa),\n                chi: NumberUtils.from(profile.chi)\n            }\n        } else return null\n    }\n\n    static async getOpponent(contract: any, playerAddress: string | null): Promise<OpponentStats | null> {\n        if (playerAddress == null)\n            return null\n        const player = await Lina.call(contract.methods.getPlayer(playerAddress))\n        if (player) {\n            return {\n                nen: NumberUtils.from(player.nen),\n                techniques: NumberUtils.from(player.techniques),\n            }\n        } else return null\n    }\n\n    static async getMatch(contract: any, matchId: string): Promise<MatchStats | null> {\n        const match = await Lina.call(contract.methods.matches(matchId))\n        if (match) {\n            return {\n                p2: match.p2,\n                p1Hidden: match.p1Hidden,\n                p2Hidden: match.p2Hidden,\n                p1Revealed: parseInt(match.p1Revealed),\n                p2Revealed: parseInt(match.p2Revealed),\n                playTime: parseInt(match.playTime),\n                revealTime: parseInt(match.revealTime)\n            }\n        } else return null\n    }\n\n    static Player = class {\n\n        static getKey(): string {\n            let key = localStorage.getItem('jajanken-key$' + Lina.account())\n            if (key == null) {\n                key = this.initKey()\n            }\n            return key\n        }\n\n        static initKey(): string {\n            const key = uuidv4().substring(0, 20)\n            localStorage.setItem('jajanken-key$' + Lina.account(), key)\n            return key\n        }\n\n        static getPlayed(): JaJankenTechnique {\n            let key = localStorage.getItem('jajanken-played$' + Lina.account())\n            if (key == null || key === '') {\n                return JaJankenTechnique.None\n            } else {\n                return parseInt(key)\n            }\n        }\n\n        static savePlay(technique: JaJankenTechnique) {\n            localStorage.setItem('jajanken-played$' + Lina.account(), technique.toString())\n        }\n\n        static async commitPlay(contract: any, matchId: string, technique: JaJankenTechnique) {\n            Lina.call(contract.methods.encodeAction(Lina.account(), technique, Web3Utils.encode(this.getKey()))).then(encodedTechnique => {\n                Lina.send(contract.methods.playMatch(encodedTechnique, matchId)).then(_ => {\n                })\n            })\n        }\n\n        static async revealPlay(contract: any, matchId: string, technique: JaJankenTechnique) {\n            Lina.send(contract.methods.revealMatch(technique, Web3Utils.encode(this.getKey()), matchId)).then(_ => {\n            })\n        }\n    }\n}\n","import React, {Component} from \"react\"\nimport {RouteComponentProps, withRouter} from \"react-router-dom\"\nimport ContractLoader from \"../../../blockchain/ContractLoader\"\nimport Web3Utils from \"../../../blockchain/Web3Utils\"\nimport JaJanken from \"../../../game/JaJanken\"\nimport ColiseumMatch from \"./ColiseumMatch\"\nimport {CurrentMatch} from \"../../../game/data/CurrentMatch\"\nimport {PlayerStats} from \"../../../game/data/PlayerStats\"\nimport {GameStats} from \"../../../game/data/GameStats\"\nimport Lina from \"../../../blockchain/Lina\"\nimport {TechniqueImg} from \"../../../resources/images\"\n\nenum GameState {\n    NotValid,\n    Loading,\n    NeedPay,\n    Lobby,\n    LookingMatch,\n    InMatch\n}\n\ninterface JaJankenColiseumProperties extends RouteComponentProps {\n    account: string,\n    network: number\n}\n\ninterface JaJankenColiseumState {\n    account: string,\n    jajankenColiseum: any,\n    player: PlayerStats,\n    game: GameStats,\n    gameState: GameState,\n    currentMatch: CurrentMatch | null\n}\n\nclass JaJankenColiseum extends Component<JaJankenColiseumProperties, JaJankenColiseumState> {\n\n    constructor(props: JaJankenColiseumProperties) {\n        super(props)\n        this.state = {\n            account: props.account,\n            jajankenColiseum: null,\n            player: {\n                inQueue: false,\n                inMatch: null,\n                nen: 0,\n                guu: 0,\n                paa: 0,\n                chi: 0\n            },\n            game: {\n                alivePlayers: 0,\n                totalGuu: 0,\n                totalPaa: 0,\n                totalChi: 0\n            },\n            gameState: GameState.Loading,\n            currentMatch: null\n        }\n    }\n\n    async componentDidMount() {\n        await this.loadColiseumData()\n        await this.subscribeToGameEvents()\n    }\n\n    async componentWillReceiveProps(nextProps: JaJankenColiseumProperties) {\n        this.setState({account: nextProps.account})\n        await this.loadColiseumData()\n        await this.subscribeToGameEvents()\n    }\n\n    async loadColiseumData() {\n        const coliseum = await ContractLoader.instantiateColiseum()\n\n        if (coliseum != null) {\n            Web3Utils.setDefaultAccount(this.state.account)\n\n            this.setState({jajankenColiseum: coliseum})\n\n            JaJanken.getGameStats(coliseum).then(game => {\n                    console.log(\"[init] game\", game)\n                    this.setState({\n                        game: game\n                    })\n                }\n            )\n\n            JaJanken.getMyProfile(coliseum).then(profile => {\n                console.log(\"[init] profile\", profile)\n                if (profile) {\n                    if (profile.nen === 0) {\n                        window.alert(`Account ${Lina.account()} has previously lost all his nen, please re-join the game first!`)\n                        this.setState({gameState: GameState.NeedPay})\n                    } else if (profile.inMatch != null) {\n                        JaJanken.getMatch(coliseum, profile.inMatch).then(match => {\n                            console.log(\"[init] match: \", match)\n                            if (match != null) {\n                                let opponentId = profile.inMatch === Lina.account() ? match.p2 : profile.inMatch\n                                JaJanken.getOpponent(coliseum, opponentId).then(opponent => {\n                                    console.log(\"[init] opponent: \", opponent)\n                                    this.setState({\n                                        player: profile,\n                                        gameState: GameState.InMatch,\n                                        currentMatch: {p1: profile.inMatch!, p2: match.p2, matchId: profile.inMatch!}\n                                    })\n                                })\n                            }\n                        })\n                    } else if (profile.inQueue) {\n                        this.setState({player: profile, gameState: GameState.LookingMatch})\n                    } else {\n                        this.setState({player: profile, gameState: GameState.Lobby})\n                    }\n                } else {\n                    window.alert(`Account ${Lina.account()} do not exist yet, please join the game first!`)\n                    this.setState({gameState: GameState.NeedPay})\n                }\n            })\n            // JaJanken.getOpponent(coliseum, Lina.account()).then(opponent => {\n            //     console.log(\"[test] me: \", opponent)\n            // })\n            // JaJanken.getMatch(coliseum, Lina.account()!).then(match => {\n            //     console.log(\"[test] match: \", match)\n            //     JaJanken.getOpponent(coliseum, match!.p2).then(opponent => {\n            //         console.log(\"[test] opponent: \", opponent)\n            //     })\n            // })\n        } else {\n            this.setState({gameState: GameState.NotValid})\n        }\n    }\n\n    handleStartMatch = (event: any) => {\n        const data = event.returnValues\n        this.setState({\n            gameState: GameState.InMatch,\n            currentMatch: {p1: data.p1, p2: data.p2, matchId: data.matchId}\n        })\n    }\n\n    handlePlayerJoinGame = (event: any) => {\n        const data = event.returnValues\n        if (data.p === Lina.account()) {\n            JaJanken.getMyProfile(this.state.jajankenColiseum).then(profile => {\n                    if (profile) {\n                        this.setState({player: profile})\n                    }\n                }\n            )\n            this.setState({gameState: GameState.Lobby})\n        }\n        JaJanken.getGameStats(this.state.jajankenColiseum).then(game => {\n                this.setState({game: game})\n            }\n        )\n    }\n\n    async subscribeToGameEvents() {\n        await this.state.jajankenColiseum\n\n        if (this.state.jajankenColiseum) {\n            this.state.jajankenColiseum.events.PlayerJoin()\n                .on('data', this.handlePlayerJoinGame)\n            this.state.jajankenColiseum.events.MatchStart({p1: Lina.account()})\n                .on('data', this.handleStartMatch)\n            this.state.jajankenColiseum.events.MatchStart({p2: Lina.account()})\n                .on('data', this.handleStartMatch)\n        }\n    }\n\n    joinColiseum = async () => {\n        await JaJanken.joinColiseum(this.state.jajankenColiseum)\n    }\n\n    joinMatch = async () => {\n        await JaJanken.joinMatchQueue(this.state.jajankenColiseum).then(data => {\n            this.setState({gameState: GameState.LookingMatch})\n        }).catch(error => console.log(\"failed join Match:\", error))\n    }\n\n    backToLobby = () => {\n        JaJanken.getMyProfile(this.state.jajankenColiseum).then(profile => {\n                if (profile) {\n                    this.setState({player: profile})\n                }\n            }\n        )\n        this.setState({gameState: GameState.Lobby})\n        JaJanken.getGameStats(this.state.jajankenColiseum).then(game => {\n                this.setState({game: game})\n            }\n        )\n    }\n\n    render() {\n        let content\n        if (this.state.gameState === GameState.Loading) {\n            content = <p id=\"loader\" className=\"text-center\">Loading...</p>\n        } else if (this.state.gameState === GameState.NeedPay) {\n            content = <div>\n                Welcome to the Coliseum {Lina.account()} !\n                <div className=\"row\">\n                    <button className={\"btn-light\"} onClick={this.joinColiseum}>Join Coliseum</button>\n                </div>\n            </div>\n        } else if (this.state.gameState === GameState.Lobby) {\n            content = <div>\n                Have fun in the Coliseum ! You got {this.state.player.nen} nen\n                <div className=\"row\">\n                    <button className={\"btn-light\"} onClick={this.joinMatch}>Join Match!</button>\n                </div>\n            </div>\n        } else if (this.state.gameState === GameState.LookingMatch) {\n            content = <div>\n                Looking for an opponent\n            </div>\n        } else if (this.state.gameState === GameState.InMatch) {\n            if (this.state.currentMatch != null) {\n                content = <div>\n                    <ColiseumMatch jajankenColiseum={this.state.jajankenColiseum} backToLobby={this.backToLobby}\n                                   currentMatch={this.state.currentMatch}/>\n                </div>\n            } else {\n                content = <div className=\"row\">\n                    <button className={\"btn-light\"} onClick={this.backToLobby}>Back to Lobby!</button>\n                </div>\n            }\n        } else if (this.state.gameState === GameState.NotValid) {\n            content = <div>JaJanken Coliseum is not deployed on your selected network.</div>\n        } else {\n            content = <div>How did you get there?</div>\n        }\n        return <div className=\"mt-5\">\n            <div className=\"row\">\n                <div className=\"col-md-4\">\n                    Game state:\n                    <ul>\n                        <li>Players in-game: {this.state.game.alivePlayers}</li>\n                        <li>total Guu: {this.state.game.totalGuu} <img src={TechniqueImg.guu} width={20} alt=\"guu\"/></li>\n                        <li>total Paa: {this.state.game.totalPaa} <img src={TechniqueImg.paa} width={20} alt=\"paa\"/></li>\n                        <li>Total Chi: {this.state.game.totalChi} <img src={TechniqueImg.chi} width={20} alt=\"chi\"/></li>\n                    </ul>\n                </div>\n                <div className=\"col-md-4\">\n                    Your Hand :\n                    <ul>\n                        <li>Life point: {this.state.player.nen}</li>\n                        <li>total Guu: {this.state.player.guu} <img src={TechniqueImg.guu} width={20} alt=\"guu\"/></li>\n                        <li>total Paa: {this.state.player.paa} <img src={TechniqueImg.paa} width={20} alt=\"paa\"/></li>\n                        <li>total Chi: {this.state.player.chi} <img src={TechniqueImg.chi} width={20} alt=\"chi\"/></li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-md-12\">\n                    {content}\n                </div>\n            </div>\n        </div>\n    }\n}\n\nexport default withRouter(JaJankenColiseum)","import './App.scss';\nimport HomeView from \"./web/views/HomeView\";\nimport React, {Component} from 'react';\nimport Web3Utils from \"./blockchain/Web3Utils\";\nimport Navbar from \"./web/views/Navbar\";\n\nimport {library} from '@fortawesome/fontawesome-svg-core'\nimport {faGithub, faLinkedinIn} from '@fortawesome/free-brands-svg-icons';\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport JaJankenColiseum from \"./web/views/coliseum/JaJankenColiseum\";\n\nlibrary.add(faGithub, faLinkedinIn);\n\nconst routerBaseName = process.env.PUBLIC_URL;\n\ninterface AppProperties {\n}\n\ninterface AppState {\n    networkId: number | null,\n    account: string,\n    loading: boolean\n}\n\nexport default class App extends Component<AppProperties, AppState> {\n    constructor(props: AppProperties) {\n        super(props)\n        this.state = {\n            networkId: null,\n            account: '0x0',\n            loading: true\n        }\n    }\n\n    async componentDidMount() {\n        let metamaskLoaded = await Web3Utils.loadMetamask()\n        if (metamaskLoaded) {\n            await this.loadBlockchainData()\n            await this.listenNetworkChanges()\n        }\n    }\n\n    async loadBlockchainData() {\n        const accounts = await Web3Utils.getAccounts()\n        let networkId = await Web3Utils.getNetwork()\n        console.log(\"accounts: \", accounts)\n        this.setState({account: accounts[0], loading: false, networkId: networkId})\n    }\n\n    async listenNetworkChanges() {\n        Web3Utils.getEth().on('chainChanged', (chainId: number) => {\n            this.setState({networkId: chainId})\n        })\n    }\n\n    render() {\n        if (this.state.loading) {\n            return <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n        } else {\n            return <div className=\"App\">\n                <Navbar account={this.state.account}/>\n                <div className=\"container-fluid\">\n                    <div className=\"row\">\n                        <main role=\"main\" className=\"col-lg-12 ml-auto mr-auto\" style={{maxWidth: '100%'}}>\n                            <BrowserRouter basename={routerBaseName}>\n                                <Switch>\n                                    {this.state.networkId != null &&\n                                    <Route path={\"/coliseum\"}>\n                                        <JaJankenColiseum account={this.state.account} network={this.state.networkId}/>\n                                    </Route>\n                                    }\n                                    <Route path={\"/\"}>\n                                        <HomeView/>\n                                    </Route>\n                                </Switch>\n                            </BrowserRouter>\n                        </main>\n                    </div>\n                </div>\n            </div>\n        }\n    }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}